// human readable source available at: https://github.com/deadlygeek/timestable
(function(){"use strict";var t,e,r,i,s="0",n=!0,o=300,l=1e3,a=3e3,u=function(){i=tt.choose(),t=i.multiplicand*i.multiplier,T(i.multiplicand+" x "+i.multiplier+" = ?"),n=!0,simpleTimer.startTimer()},c=function(){var e,o=simpleTimer.getMilliseconds();o>tt.STARTING_PROGRESS&&(o=tt.STARTING_PROGRESS),t===parseInt(s,10)?(v("CORRECT! ("+simpleTimer.getMilliseconds()+")"),i.ms=simpleTimer.getMilliseconds(),e=l):(v("WRONG! -- "+t),i.ms=tt.STARTING_PROGRESS,e=a),n=!1,S(""),clearInterval(r),r=setInterval(p,e),tt.saveProgress()},p=function(){clearInterval(r),m()},m=function(){v(" "),d(),u()},g=function(e){"0"===s?(s=e,10>t&&f()):1===s.length&&(s+=e,f()),S(s)},f=function(){simpleTimer.stopTimer(),clearInterval(e),e=setInterval(h,o)},h=function(){clearInterval(e),c()},d=function(){s="0",S(s)},T=function(t){R.questionUpdateHandler(t)},v=function(t){R.resultsUpdateHandler(t)},S=function(t){R.answerUpdateHandler(t)},R={questionUpdateHandler:void 0,resultsUpdateHandler:void 0,answerUpdateHandler:void 0};this.gc={},this.gc.handleKeyInput=function(t){n&&("c"===t?d():"e"===t?c():g(t))},this.gc.initGame=function(t,e,r){R.questionUpdateHandler=t,R.resultsUpdateHandler=e,R.answerUpdateHandler=r,u()}}).call(this),function(){"use strict";var t="0",e="00",r=!1,i=0,s=!1,n=function(){var t=(new Date).getTime();i=t-s};this.simpleTimer={},this.simpleTimer.getMilliseconds=function(){return s===!1?0:r?(n(),i):i},this.simpleTimer.stopTimer=function(){r=!1,n()},this.simpleTimer.resetTimer=function(){i=0,s=(new Date).getTime()},this.simpleTimer.startTimer=function(){r=!0,i=0,s=(new Date).getTime()},this.simpleTimer.isRunning=function(){return r},this.simpleTimer.formatMinutesSeconds=function(){var r=""+Math.floor(i/1e3%60),s=""+Math.floor(i/1e3/60);1===r.length&&(r="0"+r),t=s,e=r}}.call(this),function(){"use strict";var t=this,e=[];this.tt={},this.tt.STARTING_PROGRESS=1e4,this.tt.progress=[];var r=function(){try{return"localStorage"in window&&null!==window.localStorage}catch(t){return!1}},i=function(){for(var e=[],r=0;9>=r;r++)for(var i=0;9>=i;i++){var s={ms:t.tt.STARTING_PROGRESS,multiplicand:r,multiplier:i};e.push(s)}return e},s=function(t){var e,r,i,s=t.length;if(0===s)return!1;for(;--s;)e=Math.floor(Math.random()*(s+1)),r=t[s],i=t[e],t[s]=i,t[e]=r},n=function(t,e){return t.ms>e.ms?-1:t.ms===e.ms?0:1};this.tt.pickTopProgressScores=function(t,e){return s(t),t.sort(n),t.slice(0,e)},this.tt.resetProgress=function(){tt.progress=[],tt.progress=i()},this.tt.choose=function(){var t=tt.pickTopProgressScores(tt.progress,4),e=t[Math.floor(Math.random()*t.length)];return e},this.tt.setFilter=function(t){e=t},this.tt.getFilter=function(){return e},this.tt.loadFilters=function(){if(!r())return!1;var t=localStorage["timestable.progress.filter"];if(e=t.split(","),e.length>0){for(var i=0;e.length>i;i++)e[i]=parseInt(e[i],10);return e}return e=[]},this.tt.saveFilters=function(){return r()?(localStorage["timestable.progress.filter"]=e,void 0):!1},this.tt.loadProgress=function(){var t,i,s,n,o,l;if(!r())return alert("Your browsers does not support localStorage. Progress will not be saved on exit."),tt.resetProgress(),!1;tt.progress=[],s=0;var a;for(t=0;9>=t;t++)for(i=0;9>=i;i++){n=parseInt(localStorage["timestable.progress.ms."+s],10),o=parseInt(localStorage["timestable.progress.multiplicand."+s],10),l=parseInt(localStorage["timestable.progress.multiplier."+s],10),0>=n&&1e4>=n||(n=tt.STARTING_PROGRESS),o>=0&&9>=o||(o=t),l>=0&&9>=l||(l=i),a=!0;for(var u=0;e.length>u;u++)if(l===e[u]||o===e[u]){a=!1;break}a&&tt.progress.push({ms:n,multiplicand:o,multiplier:l}),s+=1}return tt.progress},this.tt.saveProgress=function(){var t;if(!r())return!1;for(t=0;tt.progress.length>t;t++)localStorage["timestable.progress.ms."+t]=tt.progress[t].ms,localStorage["timestable.progress.multiplicand."+t]=tt.progress[t].multiplicand,localStorage["timestable.progress.multiplier."+t]=tt.progress[t].multiplier}}.call(this);